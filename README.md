# pcb_stencil_check
Сверка изображений трафаретов для нанесения паяльной пасты с эталоном в Gerber

## Настройка системы контроля качества трафаретов

### Структура проекта

После распаковки у вас должна получиться следующая структура:

```
mask_compare_project/
├── mask_compare.py          # Главный скрипт
├── config.txt              # Конфигурация
├── requirements.txt        # Зависимости Python
├── modules/               # Модули системы
│   ├── __init__.py
│   ├── config.py
│   ├── gerber_parser.py
│   ├── image_processor.py
│   ├── alignment.py
│   ├── logger.py
│   └── ui.py
├── test_data/             # Тестовые данные (создается автоматически)
│   ├── gerber/
│   └── scans/
├── results/               # Результаты обработки (создается автоматически)
└── logs/                  # Файлы логов (создается автоматически)
```

## Установка

### 1. Установка Python

Убедитесь, что у вас установлен Python 3.8 или выше:

```bash
python --version
```

### 2. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 3. Первый запуск

```bash
python mask_compare.py
```

При первом запуске система автоматически:
- Создаст файл конфигурации `config.txt` (если его нет)
- Создаст необходимые папки
- Создаст тестовые файлы для демонстрации

## Настройка конфигурации

Отредактируйте файл `config.txt` под ваши потребности:

- `source_dir` - папка с исходными Gerber-файлами
- `scan_dir` - папка, куда сканер сохраняет файлы
- `output_dir` - папка для результатов анализа  
- `log_dir` - папка для файлов логов
- `dpi` - разрешение обработки (600/1200/2400)
- `default_operator` - имя оператора по умолчанию

## Тестирование

Система включает заглушки всех модулей, поэтому вы можете:

1. **Протестировать полный цикл работы** - введите любой 6-значный номер заказа
2. **Проверить обработку ошибок** - система случайным образом эмулирует различные ошибки
3. **Посмотреть на логирование** - все действия записываются в YAML-файлы

## Замена заглушек на реальные модули

Когда ваши MVP-модули будут готовы, замените соответствующие файлы в папке `modules/`:

- `gerber_parser.py` - ваш модуль парсинга Gerber
- `image_processor.py` - ваш модуль обработки изображений  
- `alignment.py` - ваш модуль совмещения изображений

Интерфейсы модулей (названия методов и их параметры) уже спроектированы согласно ТЗ.

## Создание ярлыка на рабочем столе

### Windows:
1. Создайте `.bat` файл:
```batch
@echo off
cd /d "C:\path\to\your\project"
python mask_compare.py
pause
```

### Linux:
1. Создайте `.desktop` файл:
```ini
[Desktop Entry]
Name=Mask Compare
Exec=python /path/to/your/project/mask_compare.py
Terminal=true
Type=Application
```

## Возможные проблемы

1. **Ошибки импорта модулей** - убедитесь, что все файлы в папке `modules/` присутствуют
2. **Права доступа к папкам** - убедитесь, что Python может создавать файлы в указанных папках
3. **Кодировка** - все файлы сохранены в UTF-8
